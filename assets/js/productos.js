const productTemplate=document.getElementById("product-card-tpl");let productos=[];async function loadProducts(){const a=await fetch("./assets/data/productos.json");productos=await a.json(),productos.forEach(a=>{renderProducts(a)}),updateInicioCartBtn()}function renderProducts(a){const b=a.categoria,c=document.querySelector(`section#${b} .products`),d=document.querySelector(`section#${b} h2`);d.innerHTML=`${a.titulo1} <span>${a.titulo2}</span>`;const e=a.productos;e.forEach(a=>{const b=productTemplate.content.cloneNode(!0),d=b.querySelector(".btn-comprar"),e=b.querySelector(".cart");b.querySelector(".img-dish").src=a.imagen,b.querySelector(".products-title").textContent=a.nombre,b.querySelector(".products-text").textContent=a.descripcion,b.querySelector(".products-price").textContent=`â‚¡${a.precio}`,d.id="product-purchase-"+a.productId,d.dataset.productId=a.productId,d.dataset.nombre=a.nombre,d.dataset.precio=a.precio,e.id="product-add-cart-"+a.productId,e.dataset.productId=a.productId,e.dataset.nombre=a.nombre,e.dataset.precio=a.precio,c.appendChild(b),d.addEventListener("click",()=>{const b=event.target,c=b.dataset.productId;openPurchasePopup(a,b.dataset)}),e.addEventListener("click",()=>{const b=event.target,c=b.dataset.productId;addProductToCart(1,a)})})}function addProductToCart(a,b){const c=JSON.parse(localStorage.getItem("basket"))||[],d=c.find(a=>a.productId===b.productId.toString()),e=d?d.cantidad+a:a;updateBasketQuantity(e,{nombreProducto:b.nombre,...b,cantidad:e,precio:b.precio,totalProducto:parseFloat(b.precio)*e,productId:b.productId.toString()})}function openPurchasePopup(a,b){verProductoClick(b,a)}window.addEventListener("load",()=>{loadProducts()});